{"version":3,"sources":["com/fulcrologic/guardrails/utils.cljc"],"mappings":"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","names":["com.fulcrologic.guardrails.utils/cljs-env?","env","cljs.core/boolean","com.fulcrologic.guardrails.utils/hint-backtrace","backtrace","com.fulcrologic.guardrails.utils/get-ns-meta","or__5002__auto__","cljs.core/meta","cljs.core/*ns*","G__35166","com.fulcrologic.guardrails.utils/get-ns-name","G__35167","var_args","G__35172","com.fulcrologic.guardrails.utils/clj->cljs","js/Error","form","com.fulcrologic.guardrails.utils.clj__GT_cljs","strip-core-ns","p1__35170#","ns-replacements","G__35173","cljs.core.merge","replace-namespace","cljs.core/qualified-symbol?","nspace","cljs.core/namespace","cljs.core/contains?","cljs.core.symbol","cljs.core.get","cljs.core/name","clojure.walk/postwalk","com.fulcrologic.guardrails.utils/get-file-position","map__35174","cljs.core/--destructure-map","line","column","G__35178","com.fulcrologic.guardrails.utils/get-call-context","com.fulcrologic.guardrails.utils.get_call_context","label","cljs.core.sequence","cljs.core/seq","cljs.core.concat","cljs.core/List","com.fulcrologic.guardrails.utils/gen-exception","msg","cljs.core/vec","cljs.core.apply","cljs.core/array-map","com.fulcrologic.guardrails.utils/devtools-config-override","com.fulcrologic.guardrails.utils/map-vals","f","m","cljs.core/reduce-kv","k","v","cljs.core.assoc","com.fulcrologic.guardrails.utils/map-keys","p!","cljs.core/persistent!","t","cljs.core/transient","com.fulcrologic.guardrails.utils/filter-vals","pred","G__35190","cljs.core.dissoc_BANG_","com.fulcrologic.guardrails.utils/atom?","x","cljs.core/Atom","G__35192","com.fulcrologic.guardrails.utils/stacktrace","err","com.fulcrologic.guardrails.utils.stacktrace","opts","ansi-color-regex","com.fulcrologic.guardrails.utils/strip-colors","s","clojure.string/replace","com.fulcrologic.guardrails.utils/elide-element?","e","G__35199","com.fulcrologic.guardrails.utils/stack-trace","tr","com.fulcrologic.guardrails.utils.stack_trace","prune?","e35200","_","com.fulcrologic.guardrails.utils/report-info","message","cljs.core.println","com.fulcrologic.guardrails.utils/-last-failure-map","cljs.core/volatile!","G__35202","com.fulcrologic.guardrails.utils/last-failure","fnsym","com.fulcrologic.guardrails.utils.last_failure","G__35203","cljs.core/deref","com.fulcrologic.guardrails.utils/record-failure","str-or-sym","com.fulcrologic.guardrails.utils/backtrace-str","clojure.string.join","iter__5480__auto__","s__35211","cljs.core/LazySeq","temp__5825__auto__","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__35213","cljs.core/chunk-buffer","i__35212","map__35215","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__35210","cljs.core/chunk-rest","map__35225","cljs.core/first","cljs.core/cons","cljs.core/rest","args","com.fulcrologic.guardrails.utils/current-backtrace","call","cljs.core/list","cljs.core.into","e35218","e35229","cljs.core.pr_str","p__35235","map__35237","com.fulcrologic.guardrails.utils/problem-description","callsite-ex","stack-trace-option","fqnm","trace?","options","G__35243","G__35245","G__35265","cljs.core/Keyword","cljs.core.map","cljs.core/pr-str","G__35282","com.fulcrologic.guardrails.utils/report-problem","p__35288","map__35290","com.fulcrologic.guardrails.utils.report_problem","com.fulcrologic.guardrails.utils/report-exception","cljs.core/ex-message","com.fulcrologic.guardrails.utils/*backtrace*","G__35301","com.fulcrologic.guardrails.utils/backtrace-entry","nspc","nm","com.fulcrologic.guardrails.utils/empty-entry","com.fulcrologic.guardrails.utils.backtrace_entry","G__35308","com.fulcrologic.guardrails.utils/new-backtrace","com.fulcrologic.guardrails.utils.new_backtrace","sz","bt","cljs.core.object_array","cljs.core/long","seq__35321","chunk__35322","count__35323","i__35324","c__5525__auto__","cljs.core/chunk-first","cljs.core/next","n","cljs.core.range","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","com.fulcrologic.guardrails.utils/backtrace-enter","seq35344","G__35345","G__35346","self__5711__auto__","next-entry","new-entry","cljs.core/mod","com.fulcrologic.guardrails.utils/backtrace-exit","prior-entry","com.fulcrologic.guardrails.utils/backtrace-entry-function","backtrace-entry","cljs.core._EQ_","com.fulcrologic.guardrails.utils/backtrace-entry-args","start","s__35410","b__35412","i__35411","iter__35409","pos","entry","cljs.core.not_EQ_"],"sourcesContent":[";; Copyright (c) George Lipov. All rights reserved.\n;; The use and distribution terms for this software are covered by the\n;; Eclipse Public License 2.0 (https://choosealicense.com/licenses/epl-2.0/)\n;; which can be found in the file LICENSE at the root of this distribution.\n;; By using this software in any fashion, you are agreeing to be bound by\n;; the terms of this license.\n;; You must not remove this notice, or any other, from this software.\n\n(ns ^:no-doc com.fulcrologic.guardrails.utils\n  #?(:cljs (:require-macros com.fulcrologic.guardrails.utils))\n  (:require\n    #?(:clj [clojure.stacktrace :as st])\n    [clojure.string :as str]\n    [clojure.walk :as walk])\n  #?(:clj\n     (:import\n       [java.lang Throwable])))\n\n(defn cljs-env? [env] (boolean (:ns env)))\n\n#?(:clj\n   (defn hint-backtrace ^\"[Ljava.lang.Object;\"\n     [backtrace]\n     backtrace)\n   :cljs\n   (defn hint-backtrace\n     [backtrace]\n     backtrace))\n\n(defn get-ns-meta [env]\n  (if (cljs-env? env)\n    (or (meta *ns*) (some-> env :ns :meta))\n    (meta *ns*)))\n\n(defn get-ns-name [env]\n  (if (cljs-env? env)\n    (or (.-name *ns*) (some-> env :ns :name))\n    (.-name *ns*)))\n\n(defn clj->cljs\n  ([form]\n   (clj->cljs form true))\n  ([form strip-core-ns]\n   (let [ns-replacements   (cond-> {\"clojure.core\"            \"cljs.core\"\n                                    \"clojure.test\"            \"cljs.test\"\n                                    \"clojure.spec.alpha\"      \"cljs.spec.alpha\"\n                                    \"clojure.spec.test.alpha\" \"cljs.spec.test.alpha\"\n                                    \"clojure.spec.gen.alpha\"  \"cljs.spec.gen.alpha\"}\n                             strip-core-ns (merge {\"clojure.core\" nil\n                                                   \"cljs.core\"    nil}))\n         replace-namespace #(if-not (qualified-symbol? %)\n                              %\n                              (let [nspace (namespace %)]\n                                (if (contains? ns-replacements nspace)\n                                  (symbol (get ns-replacements nspace) (name %))\n                                  %)))]\n     (walk/postwalk replace-namespace form))))\n\n(defn get-file-position\n  [env]\n  (if (cljs-env? env)\n    (let [{:keys [line column]} env]\n      (str line \":\" column))\n    ;; TODO implement for clojure\n    nil))\n\n(defn get-call-context\n  ([env]\n   (get-call-context env nil))\n  ([env label]\n   (str (when label (str label \" \u2013 \"))\n     (get-ns-name env)\n     \":\"\n     (get-file-position env))))\n\n(defn gen-exception [env msg]\n  `(throw (~(if (cljs-env? env) 'js/Error. 'Exception.) ~msg)))\n\n(defn devtools-config-override\n  []\n  `(let [current-config# (~'devtools.prefs/get-prefs)\n         overrides#      {:max-print-level                                    4\n                          :min-expandable-sequable-count-for-well-known-types 2}\n         left-adjust#    (str \"margin-left: -17px;\")]\n     (merge current-config#\n       (into overrides# (for [k# [:header-style]\n                              :let [v# (get current-config# k#)]]\n                          [k# (str v# left-adjust#)])))))\n\n(defn map-vals [f m] (if (nil? m) {} (reduce-kv (fn [m k v] (assoc m k (f v))) m m)))\n(defn map-keys [f m] (if (nil? m) {} (reduce-kv (fn [m k v] (assoc m (f k) v)) {} m)))\n(let [p! persistent!, t transient]                          ; Note `mapv`-like nil->{} semantics\n  (defn filter-vals [pred m] (if (nil? m) {} (p! (reduce-kv (fn [m k v] (if (pred v) m (dissoc! m k))) (t m) m)))))\n\n#?(:clj\n   (defn atom? [x] (instance? clojure.lang.Atom x))\n   :cljs\n   (defn ^boolean atom? [x] (instance? Atom x)))\n\n#?(:clj\n   (defn compiling-cljs?\n     \"Return truthy iff currently generating Cljs code.\"\n     []\n     (when-let [n (find-ns 'cljs.analyzer)]\n       (when-let [v (ns-resolve n '*cljs-file*)]\n         @v))))\n\n(defn stacktrace\n  \"Get a string that represents the full stack trace\"\n  ([err] (stacktrace err nil))\n  ([err opts]\n   #?(:cljs (str err)\n      :clj  (with-out-str (st/print-stack-trace err)))))\n\n(let [ansi-color-regex #\"\\033\\[[0-9;]*m\"]\n  (defn strip-colors [s]\n    (clojure.string/replace s ansi-color-regex \"\")))\n\n;; ADR: Printing to *err* during the compilation process breaks with nREPL, so we don't\n;;\n;; gnl:\n;; The reason we're no longer printing to *err* below is due to an obscure nREPL\n;; issue where doing it in this manner during the process of loading namespaces\n;; appears to break the latter when using a Cursive (1.13.1-2023.3) remote REPL\n;; with nREPL (1.1.0). Whether this might affect other nREPL client/server\n;; combinations is unknown. Since Guardrails can emit various messages during\n;; this process, this can lead to very strange and difficult to debug failures\n;; completely unrelated to any errors in the actual code. Using `(.println\n;; System/err ...)` does not seem to have this effect, however it only prints to\n;; the terminal where the nREPL server is running, rather than the nREPL client\n;; (which has been a known nREPL issue in various environments).\n;;\n;; If someone with the necessary courage, pain tolerance and free time on their\n;; hands should feel the need to delve into this at some point in the future,\n;; here's a basic repro that should make things blow up:\n;;\n;; - Uncomment everything related to `*err*` below and correctly wrap the\n;; relevant forms in `binding`\n;; - Require `com.fulcrologic.guardrails.core` in the `user` namespace\n;; - Define a `com.fulcrologic.guardrails.core/>defn` function in some namespace\n;; in your application\n;; - Launch an nREPL server with this deps.edn alias:\n;; :clj {:extra-deps {nrepl/nrepl {:mvn/version \"1.1.0\"}}\n;;       :main-opts  [\"-m\" \"nrepl.cmdline\"]}\n;; - Create a Cursive remote nREPL run config and execute it\n;; - Load the namespace where you used `>defn` and watch the process die quietly\n;; in the REPL right after Guardrails tells you that it's been enabled\n;; - Simply removing the `[*out* *err*]` bindings around `println` makes it work\n;; again.\n;;\n;; If you only require `com.fulcrologic.guardrails.core` in the namespace where\n;; you use `>defn`, you should be able to make it fail only on the first load\n;; attempt (when the initial Guardrails messages are printed), and complete\n;; successfully on subsequent attempts (when Guardrails is quiet).\n;;\n;; For now, given the above as well as the long and ongoing history of various\n;; stderr-related nREPL client and server issues, we're simply no longer\n;; printing anything non-fatal to stderr.\n\n;#?(:cljs\n;   (def ^:dynamic *err* *out*))\n\n#?(:clj\n   (def ^:dynamic *stacktrace-filters* [\"java.lang.\"\n                                        \"com.fulcrologic.guardrails\"\n                                        \"clojure.test$\"\n                                        \"clojure.lang.\"\n                                        \"clojure.core\"\n                                        \"clojure.main\"\n                                        \"orchestra.\"\n                                        \"kaocha.monkey_patch\"]))\n\n(defn- elide-element? [e]\n  #?(:clj  (let [ele-name (.getClassName ^StackTraceElement e)]\n             (or\n               (str/includes? ele-name \"guardrails_wrapper\")\n               (some (fn [filter] (str/starts-with? ele-name filter)) *stacktrace-filters*)))\n     :cljs false))\n\n#?(:clj\n   (defn- stack-trace-element [^StackTraceElement e]\n     (let [class    (.getClassName e)\n           method   (.getMethodName e)\n           filename (or (.getFileName e) \"\")\n           line     (.getLineNumber e)]\n       (let [match (re-matches #\"^([A-Za-z0-9_.-]+)\\$(\\w+)__\\d+$\" (str class))]\n         [(if (and match (= \"invoke\" method))\n            (apply format \"%s/%s\" (rest match))\n            (format \"%s.%s\" class method))\n          filename line]))))\n\n(defn stack-trace\n  \"Returns a vector of a Clojure-oriented stack trace of tr a Throwable/Exception. In CLJS this is just `(vector tr)`.\"\n  ([tr]\n   (stack-trace tr false))\n  ([tr prune?]\n   #?(:clj  (let [st     (.getStackTrace ^Throwable tr)\n                  result []]\n              (loop [[e & st] (next st)\n                     n            0\n                     final-result result]\n                (cond\n                  (and prune? (> n 4)) final-result\n                  e (if (and prune? (elide-element? e))\n                      (recur st n final-result)\n                      (recur st (inc n) (conj final-result (stack-trace-element e))))\n                  :else final-result)))\n      :cljs [(try (.-stack tr) (catch :default _ tr))])))\n\n(declare current-backtrace)\n(declare backtrace-entry-function)\n(declare backtrace-entry-args)\n\n(defn report-info [message]\n  (println message))\n\n(def -last-failure-map (volatile! {}))\n(defn last-failure\n  \"Returns the stack trace of the most recent GR failure for the fully-qualified function name (string or symbol)\n   `fnsym`.  `prune?` (default true) indicates that it should remove frames that appear to be uninteresting noise.\"\n  ([fnsym] (last-failure fnsym true))\n  ([fnsym prune?]\n   (some-> @-last-failure-map\n     (get (symbol fnsym))\n     (stack-trace prune?))))\n\n(defn record-failure [str-or-sym e]\n  (vswap! -last-failure-map assoc (symbol str-or-sym) e))\n\n(defn backtrace-str []\n  (str/join \"\\n\"\n    (for [{:keys [f args]} (current-backtrace)\n          :let [call (apply list (into [f] args))]]\n      (str \"    \" (try (pr-str call)\n                       (catch #?(:clj Throwable :cljs :default) _))))))\n\n(defn problem-description [message callsite-ex {stack-trace-option :guardrails/stack-trace\n                                                :guardrails/keys   [fqnm trace?] :as options}]\n  (cond-> (str message \"\\n\")\n    callsite-ex (cond->\n                  trace? (str \"  GR functions on stack. (\" `last-failure \" '\" (or fqnm \"fn-sym\") \") for full stack:\\n\" (backtrace-str) \"\\n\")\n                  :and (str (case stack-trace-option\n                              :none nil\n                              :prune (str\n                                       \"\\nPruned Stack Trace (see `gr.utils/last-failure-stacktrace` for full trace)\\n\\n\"\n                                       (str/join \" called by \" (map pr-str\n                                                                 (stack-trace callsite-ex true)))\n                                       \"\\n\")\n                              (str/join \"\\n\"\n                                (stack-trace callsite-ex false)))\n                         \"\\n\"))))\n\n(defn report-problem\n  ([message] (report-problem message nil {}))\n  ([message callsite-ex {stack-trace-option :guardrails/stack-trace\n                         :guardrails/keys   [fqnm trace?] :as options}]\n   (println (problem-description message callsite-ex options))))\n\n(defn report-exception [e message fqnm]\n  (println (str message fqnm \": \" (ex-message e))))\n\n(def ^:dynamic *backtrace* nil)\n\n(defn backtrace-entry\n  ([] [])\n  ([nspc nm args] [nspc nm args]))\n\n(def empty-entry (backtrace-entry))\n\n(defn new-backtrace\n  ([] (new-backtrace 5))\n  ([sz] (let [bt (object-array (inc (long sz)))]\n          (aset bt 0 #?(:clj (Long/valueOf 0) :cljs 0))\n          (doseq [n (range 1 (inc (long sz)))]\n            (aset bt n empty-entry))\n          bt)))\n\n(defn backtrace-enter\n  [nspc nm & args]\n  (when *backtrace*\n    (let [backtrace  (hint-backtrace *backtrace*)\n          next-entry (long (aget backtrace 0))\n          new-entry  (backtrace-entry nspc nm args)\n          sz         (dec (count backtrace))]\n      (aset backtrace (+ 1 next-entry) new-entry)\n      (aset backtrace 0 (mod (inc next-entry) sz)))))\n\n(defn backtrace-exit []\n  (when *backtrace*\n    (let [backtrace   (hint-backtrace *backtrace*)\n          next-entry  (long (aget backtrace 0))\n          sz          (dec (count backtrace))\n          prior-entry (long (mod (dec next-entry) sz))]\n      (aset backtrace (+ 1 prior-entry) empty-entry)\n      (aset backtrace 0 #?(:clj (Long/valueOf prior-entry) :cljs prior-entry)))))\n\n(defn backtrace-entry-function\n  \"Returns the function called in the given backtrace entry, or nil if the entry is nil/empty\"\n  [backtrace-entry]\n  (if (or (nil? backtrace-entry) (= backtrace-entry empty-entry))\n    nil\n    (symbol (name (get backtrace-entry 0 \"\")) (name (get backtrace-entry 1 \"\")))))\n\n(defn backtrace-entry-args\n  \"Returns the arguments passed to the call in the backtrace entry, or nil if empty\"\n  [backtrace-entry]\n  (if (or (nil? backtrace-entry) (= backtrace-entry empty-entry))\n    nil\n    (vec (get backtrace-entry 2))))\n\n(defn current-backtrace\n  \"Returns a vector of maps for the current backtrace.\"\n  []\n  (when *backtrace*\n    (let [backtrace (hint-backtrace *backtrace*)\n          start     (long (aget backtrace 0))\n          sz        (long (dec (count backtrace)))]\n      (vec\n        (for [n (range 1 (inc sz))\n              :let [pos   (inc (long (mod (- start (long n)) sz)))\n                    entry (aget backtrace pos)]\n              :when (not= entry empty-entry)]\n          {:f    (backtrace-entry-function entry)\n           :args (backtrace-entry-args entry)})))))\n"],"x_google_ignoreList":[0]}